# è‚¡ç¥¨AIé¢„æµ‹å·¥å…· - æ²¹çŒ´è„šæœ¬æ–¹æ¡ˆæ¶æ„è®¾è®¡

---

## ğŸ“š æ–‡æ¡£ä¿¡æ¯

| é¡¹ç›® | å†…å®¹ |
|------|------|
| **æ–‡æ¡£åç§°** | æ²¹çŒ´è„šæœ¬æ–¹æ¡ˆæ¶æ„è®¾è®¡ |
| **å½“å‰ç‰ˆæœ¬** | v1.0 |
| **åˆ›å»ºæ—¥æœŸ** | 2026-01-28 |
| **æœ€åæ›´æ–°** | 2026-01-28 |
| **ä½œè€…** | AIè¾…åŠ©å¼€å‘ |
| **çŠ¶æ€** | âœ… æœ€ç»ˆç‰ˆ |
| **æ–¹æ¡ˆç±»å‹** | æ²¹çŒ´è„šæœ¬ï¼ˆTampermonkey Userscriptï¼‰ |

---

## ğŸ“ ç‰ˆæœ¬å†å²

| ç‰ˆæœ¬ | æ—¥æœŸ | å˜æ›´å†…å®¹ | å˜æ›´åŸå›  |
|-----|------|---------|---------|
| v1.0 | 2026-01-28 | åˆå§‹ç‰ˆæœ¬åˆ›å»º | åŸºäºæŠ€æœ¯æ–¹æ¡ˆå¯¹æ¯”v2.0ï¼Œè®¾è®¡æ²¹çŒ´è„šæœ¬è¯¦ç»†æ¶æ„ |

---

## ç›®å½•

1. [æ¶æ„æ¦‚è¿°](#1-æ¶æ„æ¦‚è¿°)
2. [ç³»ç»Ÿæ¶æ„è®¾è®¡](#2-ç³»ç»Ÿæ¶æ„è®¾è®¡)
3. [æ¨¡å—è¯¦ç»†è®¾è®¡](#3-æ¨¡å—è¯¦ç»†è®¾è®¡)
4. [æ•°æ®æµè®¾è®¡](#4-æ•°æ®æµè®¾è®¡)
5. [LLMé›†æˆæ¶æ„](#5-llmé›†æˆæ¶æ„)
6. [UI/UXè®¾è®¡](#6-uiuxè®¾è®¡)
7. [æŠ€æœ¯æ¶æ„](#7-æŠ€æœ¯æ¶æ„)
8. [éƒ¨ç½²æ¶æ„](#8-éƒ¨ç½²æ¶æ„)
9. [å®‰å…¨æ¶æ„](#9-å®‰å…¨æ¶æ„)
10. [æ‰©å±•æ¶æ„](#10-æ‰©å±•æ¶æ„)

---

## 1. æ¶æ„æ¦‚è¿°

### 1.1 æ–¹æ¡ˆå®šä½

**æ²¹çŒ´è„šæœ¬æ–¹æ¡ˆ**æ˜¯æœ€è½»é‡ã€æœ€å¿«é€Ÿçš„å®ç°æ–¹å¼ï¼š
- **å¼€å‘å‘¨æœŸ**ï¼š3-5å¤©ï¼ˆAIè¾…åŠ©ï¼‰
- **ä»£ç è§„æ¨¡**ï¼š<500è¡ŒJavaScriptï¼ˆå¯é€‰Pythonåç«¯ï¼‰
- **éƒ¨ç½²æ–¹å¼**ï¼šå•æ–‡ä»¶è„šæœ¬ï¼Œä¸€é”®å®‰è£…
- **ç›®æ ‡ç”¨æˆ·**ï¼šä¸ªäººä½¿ç”¨æˆ–å°èŒƒå›´åˆ†äº«

### 1.2 æ ¸å¿ƒç‰¹ç‚¹

```
è½»é‡çº§ + é«˜æ•ˆç‡ + AIé©±åŠ¨
```

| ç‰¹ç‚¹ | è¯´æ˜ |
|-----|------|
| ğŸš€ **æç®€æ¶æ„** | å‰ç«¯è„šæœ¬ + å¯é€‰åç«¯ï¼Œæ— ä¸­é—´å±‚ |
| âš¡ **ç§’çº§å¯åŠ¨** | æ‰“å¼€é¡µé¢å³è¿è¡Œï¼Œæ— éœ€åŠ è½½ |
| ğŸ¤– **AIä¼˜å…ˆ** | 90%ä»£ç ç”±AIç”Ÿæˆ |
| ğŸ’° **é›¶æˆæœ¬** | å®Œå…¨å…è´¹ï¼ˆå¯é€‰LLM API 50-200å…ƒ/æœˆï¼‰ |
| ğŸ”„ **æ˜“æ›´æ–°** | ä¿®æ”¹å³ç”Ÿæ•ˆï¼Œæ— éœ€é‡è£… |

### 1.3 æ¶æ„åŸåˆ™

1. **KISSåŸåˆ™**ï¼ˆKeep It Simple, Stupidï¼‰ï¼šæœ€ç®€å®ç°
2. **YAGNIåŸåˆ™**ï¼ˆYou Aren't Gonna Need Itï¼‰ï¼šä¸åšè¿‡åº¦è®¾è®¡
3. **æ¸è¿›å¢å¼º**ï¼šæ ¸å¿ƒåŠŸèƒ½ä¼˜å…ˆï¼Œå¯é€‰åŠŸèƒ½åç½®
4. **AIé©±åŠ¨**ï¼šå……åˆ†åˆ©ç”¨AIç”Ÿæˆä»£ç 

---

## 2. ç³»ç»Ÿæ¶æ„è®¾è®¡

### 2.1 æ•´ä½“æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ç”¨æˆ·æµè§ˆå™¨å±‚                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   Tampermonkey æ²¹çŒ´æ’ä»¶ç®¡ç†å™¨                   â”‚   â”‚
â”‚  â”‚                                                 â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚  â”‚  â”‚  æ²¹çŒ´è„šæœ¬ï¼ˆstock-ai-predictor.user.jsï¼‰    â”‚ â”‚   â”‚
â”‚  â”‚  â”‚                                           â”‚ â”‚   â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚   â”‚
â”‚  â”‚  â”‚  â”‚ 1. é¡µé¢æ£€æµ‹ä¸æ³¨å…¥æ¨¡å—               â”‚  â”‚ â”‚   â”‚
â”‚  â”‚  â”‚  â”‚    - åŒ¹é…URL                        â”‚  â”‚ â”‚   â”‚
â”‚  â”‚  â”‚  â”‚    - DOMç›‘å¬                        â”‚  â”‚ â”‚   â”‚
â”‚  â”‚  â”‚  â”‚    - å»¶è¿ŸåŠ è½½                        â”‚  â”‚ â”‚   â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚   â”‚
â”‚  â”‚  â”‚                                           â”‚ â”‚   â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚   â”‚
â”‚  â”‚  â”‚  â”‚ 2. æ•°æ®æå–æ¨¡å—                     â”‚  â”‚ â”‚   â”‚
â”‚  â”‚  â”‚  â”‚    - è‚¡ç¥¨ä»£ç                        â”‚  â”‚ â”‚   â”‚
â”‚  â”‚  â”‚  â”‚    - å®æ—¶ä»·æ ¼                       â”‚  â”‚ â”‚   â”‚
â”‚  â”‚  â”‚  â”‚    - Kçº¿æ•°æ®                        â”‚  â”‚ â”‚   â”‚
â”‚  â”‚  â”‚  â”‚    - æŠ€æœ¯æŒ‡æ ‡                       â”‚  â”‚ â”‚   â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚   â”‚
â”‚  â”‚  â”‚                                           â”‚ â”‚   â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚   â”‚
â”‚  â”‚  â”‚  â”‚ 3. UIæ¸²æŸ“æ¨¡å—                       â”‚  â”‚ â”‚   â”‚
â”‚  â”‚  â”‚  â”‚    - é¢„æµ‹é¢æ¿                       â”‚  â”‚ â”‚   â”‚
â”‚  â”‚  â”‚  â”‚    - æ‚¬æµ®æŒ‰é’®                       â”‚  â”‚ â”‚   â”‚
â”‚  â”‚  â”‚  â”‚    - åŠ è½½åŠ¨ç”»                       â”‚  â”‚ â”‚   â”‚
â”‚  â”‚  â”‚  â”‚    - é”™è¯¯æç¤º                       â”‚  â”‚ â”‚   â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚   â”‚
â”‚  â”‚  â”‚                                           â”‚ â”‚   â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚   â”‚
â”‚  â”‚  â”‚  â”‚ 4. APIè°ƒç”¨æ¨¡å—                      â”‚  â”‚ â”‚   â”‚
â”‚  â”‚  â”‚  â”‚    - GM_xmlhttpRequest              â”‚  â”‚ â”‚   â”‚
â”‚  â”‚  â”‚  â”‚    - CORSå¤„ç†                       â”‚  â”‚ â”‚   â”‚
â”‚  â”‚  â”‚  â”‚    - è¶…æ—¶é‡è¯•                       â”‚  â”‚ â”‚   â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚   â”‚
â”‚  â”‚  â”‚                                           â”‚ â”‚   â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚   â”‚
â”‚  â”‚  â”‚  â”‚ 5. æœ¬åœ°å­˜å‚¨æ¨¡å—                     â”‚  â”‚ â”‚   â”‚
â”‚  â”‚  â”‚  â”‚    - GM_setValue/GM_getValue        â”‚  â”‚ â”‚   â”‚
â”‚  â”‚  â”‚  â”‚    - è‡ªé€‰è‚¡ç®¡ç†                     â”‚  â”‚ â”‚   â”‚
â”‚  â”‚  â”‚  â”‚    - é…ç½®æŒä¹…åŒ–                     â”‚  â”‚ â”‚   â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚   â”‚
â”‚  â”‚  â”‚                                           â”‚ â”‚   â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚   â”‚
â”‚  â”‚  â”‚  â”‚ 6. å·¥å…·å‡½æ•°æ¨¡å—                     â”‚  â”‚ â”‚   â”‚
â”‚  â”‚  â”‚  â”‚    - æ•°æ®æ ¼å¼åŒ–                     â”‚  â”‚ â”‚   â”‚
â”‚  â”‚  â”‚  â”‚    - æ—¥æœŸæ—¶é—´                       â”‚  â”‚ â”‚   â”‚
â”‚  â”‚  â”‚  â”‚    - å­—ç¬¦ä¸²å¤„ç†                     â”‚  â”‚ â”‚   â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚   â”‚
â”‚  â”‚  â”‚                                           â”‚ â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†• HTTP/WebSocket
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   åç«¯æœåŠ¡å±‚ï¼ˆå¯é€‰ï¼‰                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  æœ¬åœ°PythonæœåŠ¡ï¼ˆFastAPIï¼‰                      â”‚   â”‚
â”‚  â”‚                                                  â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ RESTful API                                â”‚   â”‚
â”‚  â”‚  â”‚   â”œâ”€â”€ POST /api/predict                      â”‚   â”‚
â”‚  â”‚  â”‚   â”œâ”€â”€ GET  /api/stock/{code}/info            â”‚   â”‚
â”‚  â”‚  â”‚   â””â”€â”€ GET  /api/stock/{code}/history         â”‚   â”‚
â”‚  â”‚  â”‚                                              â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ æ•°æ®è·å–æœåŠ¡                                â”‚   â”‚
â”‚  â”‚  â”‚   â””â”€â”€ efinance / AKShare                     â”‚   â”‚
â”‚  â”‚  â”‚                                              â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ LLMé›†æˆæœåŠ¡                                 â”‚   â”‚
â”‚  â”‚  â”‚   â”œâ”€â”€ DeepSeek API                           â”‚   â”‚
â”‚  â”‚  â”‚   â”œâ”€â”€ GPT-4 API                              â”‚   â”‚
â”‚  â”‚  â”‚   â””â”€â”€ Promptå·¥ç¨‹                             â”‚   â”‚
â”‚  â”‚  â”‚                                              â”‚   â”‚
â”‚  â”‚  â””â”€â”€ ç¼“å­˜æœåŠ¡                                    â”‚   â”‚
â”‚  â”‚      â””â”€â”€ å†…å­˜ç¼“å­˜ / æ–‡ä»¶ç¼“å­˜                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†• HTTPS
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      å¤–éƒ¨æœåŠ¡å±‚                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ä¸œæ–¹è´¢å¯ŒAPI â”‚  â”‚ LLM APIæœåŠ¡  â”‚  â”‚ï¼ˆå¯é€‰ï¼‰æ•°æ®  â”‚  â”‚
â”‚  â”‚             â”‚  â”‚              â”‚  â”‚   å¤‡ä»½æº     â”‚  â”‚
â”‚  â”‚ - å®æ—¶è¡Œæƒ…  â”‚  â”‚ - DeepSeek   â”‚  â”‚ - AKShare    â”‚  â”‚
â”‚  â”‚ - Kçº¿æ•°æ®   â”‚  â”‚ - GPT-4      â”‚  â”‚ - Tushare    â”‚  â”‚
â”‚  â”‚ - è´¢åŠ¡æ•°æ®  â”‚  â”‚ - æ–‡å¿ƒä¸€è¨€   â”‚  â”‚              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 éƒ¨ç½²æ¨¡å¼

#### æ¨¡å¼1ï¼šçº¯å‰ç«¯æ¨¡å¼ï¼ˆæ¨è MVPï¼‰

```
æµè§ˆå™¨ + æ²¹çŒ´è„šæœ¬ â†’ ç›´æ¥è°ƒç”¨å…¬å¼€API
```

**ä¼˜åŠ¿**ï¼š
- âœ… æ— éœ€åç«¯ï¼Œå¼€ç®±å³ç”¨
- âœ… å®Œå…¨å…è´¹ï¼Œé›¶ç»´æŠ¤
- âœ… å•æ–‡ä»¶åˆ†å‘

**é™åˆ¶**ï¼š
- âš ï¸ æ— æ³•è·å–å†å²æ•°æ®ï¼ˆAPIé™åˆ¶ï¼‰
- âš ï¸ LLMè°ƒç”¨å¯èƒ½å—é™ï¼ˆCORSï¼‰

#### æ¨¡å¼2ï¼šæ··åˆæ¨¡å¼ï¼ˆæ¨èç”Ÿäº§ï¼‰

```
æµè§ˆå™¨ + æ²¹çŒ´è„šæœ¬ â†’ æœ¬åœ°PythonæœåŠ¡ â†’ LLM API
```

**ä¼˜åŠ¿**ï¼š
- âœ… åŠŸèƒ½å®Œæ•´ï¼Œæ— é™åˆ¶
- âœ… æ•°æ®å¯ç¼“å­˜
- âœ… æ”¯æŒæ‰¹é‡åˆ†æ

**è¦æ±‚**ï¼š
- éœ€è¦æœ¬åœ°è¿è¡ŒPythonæœåŠ¡

### 2.3 æŠ€æœ¯æ ˆ

#### å‰ç«¯ï¼ˆæ²¹çŒ´è„šæœ¬ï¼‰

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|-----|------|------|
| JavaScript | ES6+ | ä¸»è¦å¼€å‘è¯­è¨€ |
| Tampermonkey API | latest | è„šæœ¬ç®¡ç†API |
| DOM API | HTML5 | é¡µé¢æ“ä½œ |
| CSS3 | latest | æ ·å¼è®¾è®¡ |
| Fetch API | latest | HTTPè¯·æ±‚ |

#### åç«¯ï¼ˆå¯é€‰ï¼‰

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|-----|------|------|
| Python | 3.11+ | å¼€å‘è¯­è¨€ |
| FastAPI | 0.100+ | Webæ¡†æ¶ |
| efinance | latest | æ•°æ®è·å– |
| httpx | latest | å¼‚æ­¥HTTP |
| pydantic | latest | æ•°æ®éªŒè¯ |

#### LLMæœåŠ¡

| æœåŠ¡ | å®šä»· | æ¨èåº¦ |
|-----|------|--------|
| DeepSeek | Â¥0.14/1M tokens | â­â­â­â­â­ |
| GPT-4 | Â¥18/1M tokens | â­â­â­â­ |
| æ–‡å¿ƒä¸€è¨€ | Â¥0.012/1K tokens | â­â­â­ |

---

## 3. æ¨¡å—è¯¦ç»†è®¾è®¡

### 3.1 æ¨¡å—1ï¼šé¡µé¢æ£€æµ‹ä¸æ³¨å…¥

#### åŠŸèƒ½èŒè´£

- ç›‘å¬é¡µé¢åŠ è½½äº‹ä»¶
- æ£€æµ‹å½“å‰URLæ˜¯å¦åŒ¹é…ç›®æ ‡ç½‘ç«™
- è§¦å‘è„šæœ¬ä¸»é€»è¾‘

#### ä»£ç ç»“æ„

```javascript
// ==UserScript==
// @name         ä¸œæ–¹è´¢å¯ŒAIé¢„æµ‹åŠ©æ‰‹
// @namespace    http://tampermonkey.net/
// @version      1.0.0
// @description  AIé©±åŠ¨çš„è‚¡ç¥¨èµ°åŠ¿é¢„æµ‹å’ŒåŸå› åˆ†æ
// @author       AI Generated
// @match        https://quote.eastmoney.com/*
// @match        https://emweb.eastmoney.com/*
// @grant        GM_xmlhttpRequest
// @grant        GM_setValue
// @grant        GM_getValue
// @grant        GM_addStyle
// @connect      localhost
// @connect      api.deepseek.com
// @connect      api.openai.com
// @run-at       document-idle
// ==/UserScript==

(function() {
    'use strict';

    // ä¸»å…¥å£
    function main() {
        // ç­‰å¾…é¡µé¢å®Œå…¨åŠ è½½
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', init);
        } else {
            init();
        }
    }

    // åˆå§‹åŒ–
    function init() {
        console.log('[AI Predictor] è„šæœ¬å·²åŠ è½½');

        // æ£€æµ‹é¡µé¢ç±»å‹
        const pageType = detectPageType();

        // æ ¹æ®é¡µé¢ç±»å‹æ‰§è¡Œä¸åŒé€»è¾‘
        switch (pageType) {
            case 'stock_detail':
                handleStockDetailPage();
                break;
            case 'stock_list':
                handleStockListPage();
                break;
            default:
                console.log('[AI Predictor] æœªåŒ¹é…çš„é¡µé¢ç±»å‹');
        }
    }

    // æ£€æµ‹é¡µé¢ç±»å‹
    function detectPageType() {
        const url = window.location.href;

        if (/quote\.eastmoney\.com\/.*\/\.html/.test(url)) {
            return 'stock_detail';
        } else if (/quote\.eastmoney\.com\/center\/gridlist\.html/.test(url)) {
            return 'stock_list';
        }

        return 'unknown';
    }

    // å¯åŠ¨
    main();
})();
```

#### æŠ€æœ¯è¦ç‚¹

1. **@run-at æ—¶æœºé€‰æ‹©**
   - `document-start`ï¼šæœ€æ—©æ³¨å…¥ï¼Œä½†DOMæœªå°±ç»ª
   - `document-end`ï¼šDOMå°±ç»ªï¼Œèµ„æºå¯èƒ½æœªåŠ è½½
   - `document-idle`ï¼šå®Œå…¨åŠ è½½ï¼ˆæ¨èï¼‰

2. **URLåŒ¹é…æ¨¡å¼**
   ```javascript
   // ç²¾ç¡®åŒ¹é…
   @match https://quote.eastmoney.com/SZ000001.html

   // é€šé…ç¬¦åŒ¹é…
   @match https://quote.eastmoney.com/*

   // æ­£åˆ™åŒ¹é…ï¼ˆä½¿ç”¨@includeï¼‰
   // @include /^https:\/\/quote\.eastmoney\.com\/.*\.html$/
   ```

3. **æƒé™å£°æ˜**
   ```javascript
   // å…è®¸è·¨åŸŸè¯·æ±‚
   @grant        GM_xmlhttpRequest

   // å…è®¸æœ¬åœ°å­˜å‚¨
   @grant        GM_setValue
   @grant        GM_getValue

   // å…è®¸æ³¨å…¥æ ·å¼
   @grant        GM_addStyle

   // å…è®¸è¿æ¥åˆ°æŒ‡å®šåŸŸå
   @connect      localhost
   @connect      api.deepseek.com
   ```

### 3.2 æ¨¡å—2ï¼šæ•°æ®æå–

#### åŠŸèƒ½èŒè´£

ä»ä¸œæ–¹è´¢å¯Œé¡µé¢æå–è‚¡ç¥¨æ•°æ®

#### æ•°æ®æ¨¡å‹

```javascript
// æå–çš„æ•°æ®ç»“æ„
const StockData = {
    // åŸºç¡€ä¿¡æ¯
    code: '000001',           // è‚¡ç¥¨ä»£ç 
    name: 'å¹³å®‰é“¶è¡Œ',          // è‚¡ç¥¨åç§°
    market: 'SZ',             // å¸‚åœºï¼ˆSZ/SHï¼‰

    // å®æ—¶è¡Œæƒ…
    currentPrice: 15.23,      // å½“å‰ä»·
    openPrice: 15.10,         // ä»Šå¼€
    closePrice: 15.05,        // æ˜¨æ”¶
    highPrice: 15.30,         // æœ€é«˜
    lowPrice: 15.00,          // æœ€ä½
    volume: 1234567,          // æˆäº¤é‡ï¼ˆæ‰‹ï¼‰
    amount: 1234567890,       // æˆäº¤é¢ï¼ˆå…ƒï¼‰

    // æ¶¨è·Œä¿¡æ¯
    change: 0.18,             // æ¶¨è·Œé¢
    changePercent: 1.19,      // æ¶¨è·Œå¹…%

    // æ—¶é—´æˆ³
    timestamp: Date.now(),

    // æ‰©å±•æ•°æ®ï¼ˆå¯é€‰ï¼‰
    klineData: [],            // Kçº¿æ•°æ®
    technicalIndicators: {},  // æŠ€æœ¯æŒ‡æ ‡
};
```

#### æå–ç­–ç•¥

**ç­–ç•¥1ï¼šDOMé€‰æ‹©å™¨ï¼ˆä¸»è¦ï¼‰**

```javascript
function extractStockDataFromDOM() {
    try {
        // è‚¡ç¥¨ä»£ç 
        const code = window.location.href.match(/\/(SZ|SH)(\d{6})\.html/)[2];

        // è‚¡ç¥¨åç§°
        const nameEl = document.querySelector('.stock-name');
        const name = nameEl?.textContent?.trim() || '';

        // å½“å‰ä»·æ ¼
        const priceEl = document.querySelector('.current-price');
        const currentPrice = parseFloat(priceEl?.textContent) || 0;

        // æ¶¨è·Œå¹…
        const changeEl = document.querySelector('.price-change');
        const changePercent = parseFloat(changeEl?.textContent) || 0;

        // æˆäº¤é‡
        const volumeEl = document.querySelector('.volume');
        const volume = parseInt(volumeEl?.textContent?.replace(/,/g, '')) || 0;

        return {
            code,
            name,
            currentPrice,
            changePercent,
            volume,
            timestamp: Date.now()
        };
    } catch (error) {
        console.error('[AI Predictor] æ•°æ®æå–å¤±è´¥:', error);
        return null;
    }
}
```

**ç­–ç•¥2ï¼šAPIè°ƒç”¨ï¼ˆå¤‡ç”¨ï¼‰**

```javascript
async function extractStockDataFromAPI(code) {
    return new Promise((resolve, reject) => {
        GM_xmlhttpRequest({
            method: 'GET',
            url: `https://push2.eastmoney.com/api/qt/stock/get?secid=${code}`,
            onload: function(response) {
                try {
                    const data = JSON.parse(response.responseText);
                    resolve(parseAPIResponse(data));
                } catch (error) {
                    reject(error);
                }
            },
            onerror: reject
        });
    });
}
```

#### å®¹é”™æœºåˆ¶

```javascript
// æ™ºèƒ½æå–ï¼ˆå¤šç­–ç•¥å›é€€ï¼‰
async function smartExtractStockData() {
    // ç­–ç•¥1ï¼šDOMæå–ï¼ˆæœ€å¿«ï¼‰
    let data = extractStockDataFromDOM();

    if (!data || !data.currentPrice) {
        console.log('[AI Predictor] DOMæå–å¤±è´¥ï¼Œå°è¯•API');

        // ç­–ç•¥2ï¼šAPIè°ƒç”¨
        const code = extractStockCodeFromURL();
        data = await extractStockDataFromAPI(code);
    }

    if (!data) {
        throw new Error('æ— æ³•æå–è‚¡ç¥¨æ•°æ®');
    }

    // æ•°æ®éªŒè¯
    if (!validateStockData(data)) {
        throw new Error('è‚¡ç¥¨æ•°æ®æ— æ•ˆ');
    }

    return data;
}

// æ•°æ®éªŒè¯
function validateStockData(data) {
    return (
        data &&
        data.code &&
        data.currentPrice &&
        data.currentPrice > 0 &&
        data.timestamp
    );
}
```

### 3.3 æ¨¡å—3ï¼šUIæ¸²æŸ“

#### UIç»„ä»¶æ¶æ„

```
é¢„æµ‹é¢æ¿ï¼ˆPredictionPanelï¼‰
â”œâ”€â”€ æ ‡é¢˜æ ï¼ˆHeaderï¼‰
â”‚   â”œâ”€â”€ æ ‡é¢˜
â”‚   â”œâ”€â”€ å…³é—­æŒ‰é’®
â”‚   â””â”€â”€ åˆ·æ–°æŒ‰é’®
â”œâ”€â”€ å†…å®¹åŒºï¼ˆContentï¼‰
â”‚   â”œâ”€â”€ ä»·æ ¼å¡ç‰‡ï¼ˆPriceCardï¼‰
â”‚   â”‚   â”œâ”€â”€ å½“å‰ä»·æ ¼
â”‚   â”‚   â”œâ”€â”€ é¢„æµ‹ä»·æ ¼
â”‚   â”‚   â””â”€â”€ æ¶¨è·Œå¹…
â”‚   â”œâ”€â”€ åŸå› åˆ†æï¼ˆReasonAnalysisï¼‰â­æ ¸å¿ƒ
â”‚   â”‚   â”œâ”€â”€ æŠ€æœ¯é¢
â”‚   â”‚   â”œâ”€â”€ åŸºæœ¬é¢
â”‚   â”‚   â””â”€â”€ æƒ…ç»ªé¢
â”‚   â””â”€â”€ æŠ•èµ„å»ºè®®ï¼ˆSuggestionï¼‰
â”‚       â”œâ”€â”€ å»ºè®®ç±»å‹
â”‚       â”œâ”€â”€ ç½®ä¿¡åº¦
â”‚       â””â”€â”€ é£é™©æç¤º
â””â”€â”€ åº•éƒ¨æ ï¼ˆFooterï¼‰
    â”œâ”€â”€ æ›´æ–°æ—¶é—´
    â””â”€â”€ å…è´£å£°æ˜
```

#### å®Œæ•´UIä»£ç 

```javascript
// UIæ¸²æŸ“æ¨¡å—
const UIModule = {
    // åˆ›å»ºé¢„æµ‹é¢æ¿
    createPredictionPanel(data) {
        const panel = document.createElement('div');
        panel.id = 'ai-prediction-panel';
        panel.className = 'ai-prediction-panel';

        panel.innerHTML = `
            <div class="panel-header">
                <div class="panel-title">
                    <span class="icon">ğŸ¤–</span>
                    <span class="text">AIé¢„æµ‹åˆ†æ</span>
                    <span class="version">v1.0</span>
                </div>
                <div class="panel-controls">
                    <button class="btn-refresh" title="åˆ·æ–°">ğŸ”„</button>
                    <button class="btn-close" title="å…³é—­">Ã—</button>
                </div>
            </div>

            <div class="panel-content">
                ${this.renderPriceCard(data)}
                ${this.renderReasonAnalysis(data)}
                ${this.renderSuggestion(data)}
            </div>

            <div class="panel-footer">
                <span class="update-time">æ›´æ–°äºï¼š${new Date().toLocaleString()}</span>
                <span class="disclaimer">âš ï¸ ä»…ä¾›å‚è€ƒï¼Œä¸æ„æˆæŠ•èµ„å»ºè®®</span>
            </div>
        `;

        // æ³¨å…¥æ ·å¼
        this.injectStyles();

        // ç»‘å®šäº‹ä»¶
        this.bindEvents(panel);

        return panel;
    },

    // æ¸²æŸ“ä»·æ ¼å¡ç‰‡
    renderPriceCard(data) {
        const trendClass = data.trend === 'UP' ? 'trend-up' : 'trend-down';
        const trendIcon = data.trend === 'UP' ? 'ğŸ“ˆ' : 'ğŸ“‰';

        return `
            <div class="price-card">
                <div class="price-row">
                    <span class="label">å½“å‰ä»·æ ¼</span>
                    <span class="value">Â¥${data.currentPrice.toFixed(2)}</span>
                </div>
                <div class="price-row ${trendClass}">
                    <span class="label">é¢„æµ‹ä»·æ ¼</span>
                    <span class="value">
                        ${trendIcon} Â¥${data.predictPrice.toFixed(2)}
                        <span class="change">(${data.changePercent > 0 ? '+' : ''}${data.changePercent.toFixed(2)}%)</span>
                    </span>
                </div>
                <div class="price-row">
                    <span class="label">ç½®ä¿¡åŒºé—´</span>
                    <span class="value range">
                        Â¥${data.lowerBound.toFixed(2)} - Â¥${data.upperBound.toFixed(2)}
                    </span>
                </div>
            </div>
        `;
    },

    // æ¸²æŸ“åŸå› åˆ†æ â­æ ¸å¿ƒåŠŸèƒ½
    renderReasonAnalysis(data) {
        return `
            <div class="reason-analysis">
                <div class="analysis-title">
                    <span class="icon">ğŸ“Š</span>
                    <span class="text">èµ°åŠ¿åŸå› åˆ†æ</span>
                </div>

                <div class="analysis-item">
                    <div class="item-header">
                        <span class="badge technical">æŠ€æœ¯é¢</span>
                    </div>
                    <div class="item-content">
                        ${data.reason.technical}
                    </div>
                </div>

                <div class="analysis-item">
                    <div class="item-header">
                        <span class="badge fundamental">åŸºæœ¬é¢</span>
                    </div>
                    <div class="item-content">
                        ${data.reason.fundamental}
                    </div>
                </div>

                <div class="analysis-item">
                    <div class="item-header">
                        <span class="badge sentiment">æƒ…ç»ªé¢</span>
                    </div>
                    <div class="item-content">
                        ${data.reason.sentiment}
                    </div>
                </div>

                ${data.reason.news && data.reason.news.length > 0 ? `
                    <div class="analysis-item">
                        <div class="item-header">
                            <span class="badge news">ç›¸å…³æ–°é—»</span>
                        </div>
                        <div class="item-content">
                            <ul class="news-list">
                                ${data.reason.news.map(news => `
                                    <li><a href="${news.url}" target="_blank">${news.title}</a></li>
                                `).join('')}
                            </ul>
                        </div>
                    </div>
                ` : ''}
            </div>
        `;
    },

    // æ¸²æŸ“æŠ•èµ„å»ºè®®
    renderSuggestion(data) {
        const suggestionConfig = {
            'BUY': { text: 'ä¹°å…¥', class: 'suggestion-buy', icon: 'ğŸŸ¢' },
            'HOLD': { text: 'æŒæœ‰', class: 'suggestion-hold', icon: 'ğŸŸ¡' },
            'SELL': { text: 'å–å‡º', class: 'suggestion-sell', icon: 'ğŸ”´' }
        };

        const config = suggestionConfig[data.suggestion] || suggestionConfig['HOLD'];

        return `
            <div class="suggestion-card">
                <div class="suggestion-header ${config.class}">
                    <span class="icon">${config.icon}</span>
                    <span class="text">æŠ•èµ„å»ºè®®ï¼š${config.text}</span>
                </div>
                <div class="suggestion-details">
                    <div class="detail-row">
                        <span class="label">ç½®ä¿¡åº¦</span>
                        <div class="confidence-bar">
                            <div class="confidence-fill" style="width: ${data.confidence}%"></div>
                            <span class="confidence-text">${data.confidence}%</span>
                        </div>
                    </div>
                    <div class="detail-row">
                        <span class="label">é¢„æµ‹å‘¨æœŸ</span>
                        <span class="value">${data.timeframe === '1d' ? '1-3å¤©' : '3-7å¤©'}</span>
                    </div>
                </div>
            </div>
        `;
    },

    // æ³¨å…¥æ ·å¼
    injectStyles() {
        if (document.getElementById('ai-predictor-styles')) return;

        const styles = `
            <style id="ai-predictor-styles">
                /* ä¸»é¢æ¿æ ·å¼ */
                .ai-prediction-panel {
                    position: fixed;
                    top: 100px;
                    right: 20px;
                    width: 360px;
                    max-height: 80vh;
                    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                    border-radius: 12px;
                    box-shadow: 0 10px 40px rgba(0,0,0,0.3);
                    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
                    z-index: 10000;
                    overflow: hidden;
                    animation: slideIn 0.3s ease-out;
                }

                @keyframes slideIn {
                    from {
                        transform: translateX(400px);
                        opacity: 0;
                    }
                    to {
                        transform: translateX(0);
                        opacity: 1;
                    }
                }

                /* æ ‡é¢˜æ  */
                .panel-header {
                    background: rgba(255,255,255,0.1);
                    backdrop-filter: blur(10px);
                    padding: 12px 16px;
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    border-bottom: 1px solid rgba(255,255,255,0.1);
                }

                .panel-title {
                    display: flex;
                    align-items: center;
                    gap: 8px;
                    color: white;
                    font-weight: 600;
                }

                .panel-controls {
                    display: flex;
                    gap: 8px;
                }

                .panel-controls button {
                    background: rgba(255,255,255,0.2);
                    border: none;
                    width: 28px;
                    height: 28px;
                    border-radius: 6px;
                    cursor: pointer;
                    font-size: 16px;
                    transition: all 0.2s;
                }

                .panel-controls button:hover {
                    background: rgba(255,255,255,0.3);
                    transform: scale(1.1);
                }

                /* å†…å®¹åŒº */
                .panel-content {
                    background: white;
                    padding: 16px;
                    max-height: calc(80vh - 120px);
                    overflow-y: auto;
                }

                /* ä»·æ ¼å¡ç‰‡ */
                .price-card {
                    margin-bottom: 16px;
                    padding: 12px;
                    background: #f8f9fa;
                    border-radius: 8px;
                }

                .price-row {
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    padding: 8px 0;
                }

                .price-row .label {
                    color: #6c757d;
                    font-size: 14px;
                }

                .price-row .value {
                    font-weight: 600;
                    font-size: 16px;
                }

                .trend-up .value {
                    color: #dc3545;
                }

                .trend-down .value {
                    color: #28a745;
                }

                /* åŸå› åˆ†æ */
                .reason-analysis {
                    margin-bottom: 16px;
                }

                .analysis-title {
                    display: flex;
                    align-items: center;
                    gap: 6px;
                    font-weight: 600;
                    margin-bottom: 12px;
                    color: #212529;
                }

                .analysis-item {
                    margin-bottom: 12px;
                    padding: 10px;
                    background: #f8f9fa;
                    border-radius: 6px;
                }

                .badge {
                    display: inline-block;
                    padding: 2px 8px;
                    border-radius: 4px;
                    font-size: 12px;
                    font-weight: 500;
                }

                .badge.technical {
                    background: #e7f3ff;
                    color: #0066cc;
                }

                .badge.fundamental {
                    background: #fff4e6;
                    color: #ff6600;
                }

                .badge.sentiment {
                    background: #e8f5e9;
                    color: #2e7d32;
                }

                .badge.news {
                    background: #f3e5f5;
                    color: #7b1fa2;
                }

                .item-content {
                    margin-top: 8px;
                    font-size: 13px;
                    line-height: 1.6;
                    color: #495057;
                }

                .news-list {
                    list-style: none;
                    padding: 0;
                    margin: 0;
                }

                .news-list li {
                    padding: 6px 0;
                }

                .news-list a {
                    color: #0066cc;
                    text-decoration: none;
                }

                .news-list a:hover {
                    text-decoration: underline;
                }

                /* æŠ•èµ„å»ºè®® */
                .suggestion-card {
                    background: #f8f9fa;
                    border-radius: 8px;
                    padding: 12px;
                }

                .suggestion-header {
                    display: flex;
                    align-items: center;
                    gap: 8px;
                    font-weight: 600;
                    margin-bottom: 12px;
                    padding: 8px;
                    border-radius: 6px;
                }

                .suggestion-buy {
                    background: #d4edda;
                    color: #155724;
                }

                .suggestion-hold {
                    background: #fff3cd;
                    color: #856404;
                }

                .suggestion-sell {
                    background: #f8d7da;
                    color: #721c24;
                }

                .confidence-bar {
                    display: flex;
                    align-items: center;
                    gap: 8px;
                    flex: 1;
                }

                .confidence-fill {
                    height: 8px;
                    background: linear-gradient(90deg, #ffc107, #28a745);
                    border-radius: 4px;
                    transition: width 0.5s ease;
                }

                /* åº•éƒ¨æ  */
                .panel-footer {
                    background: rgba(255,255,255,0.1);
                    backdrop-filter: blur(10px);
                    padding: 10px 16px;
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    font-size: 11px;
                    color: rgba(255,255,255,0.8);
                }

                /* æ»šåŠ¨æ¡ç¾åŒ– */
                .panel-content::-webkit-scrollbar {
                    width: 6px;
                }

                .panel-content::-webkit-scrollbar-track {
                    background: #f1f1f1;
                    border-radius: 3px;
                }

                .panel-content::-webkit-scrollbar-thumb {
                    background: #888;
                    border-radius: 3px;
                }

                .panel-content::-webkit-scrollbar-thumb:hover {
                    background: #555;
                }

                /* åŠ è½½åŠ¨ç”» */
                .loading-spinner {
                    border: 3px solid #f3f3f3;
                    border-top: 3px solid #667eea;
                    border-radius: 50%;
                    width: 30px;
                    height: 30px;
                    animation: spin 1s linear infinite;
                    margin: 20px auto;
                }

                @keyframes spin {
                    0% { transform: rotate(0deg); }
                    100% { transform: rotate(360deg); }
                }
            </style>
        `;

        document.head.insertAdjacentHTML('beforeend', styles);
    },

    // ç»‘å®šäº‹ä»¶
    bindEvents(panel) {
        // å…³é—­æŒ‰é’®
        const closeBtn = panel.querySelector('.btn-close');
        closeBtn?.addEventListener('click', () => {
            panel.remove();
        });

        // åˆ·æ–°æŒ‰é’®
        const refreshBtn = panel.querySelector('.btn-refresh');
        refreshBtn?.addEventListener('click', () => {
            // é‡æ–°åŠ è½½é¢„æµ‹
            window.dispatchEvent(new CustomEvent('ai-predictor-refresh'));
        });
    }
};
```

### 3.4 æ¨¡å—4ï¼šAPIè°ƒç”¨

#### HTTPå®¢æˆ·ç«¯å°è£…

```javascript
// APIè°ƒç”¨æ¨¡å—
const APIModule = {
    // é€šç”¨è¯·æ±‚æ–¹æ³•
    request(config) {
        return new Promise((resolve, reject) => {
            GM_xmlhttpRequest({
                method: config.method || 'GET',
                url: config.url,
                data: config.data ? JSON.stringify(config.data) : undefined,
                headers: {
                    'Content-Type': 'application/json',
                    ...config.headers
                },
                timeout: config.timeout || 10000,
                onload: function(response) {
                    try {
                        const data = JSON.parse(response.responseText);
                        if (response.status >= 200 && response.status < 300) {
                            resolve(data);
                        } else {
                            reject(new Error(`HTTP ${response.status}: ${data.message || 'è¯·æ±‚å¤±è´¥'}`));
                        }
                    } catch (error) {
                        resolve(response.responseText);
                    }
                },
                onerror: function(error) {
                    reject(new Error('ç½‘ç»œè¯·æ±‚å¤±è´¥'));
                },
                ontimeout: function() {
                    reject(new Error('è¯·æ±‚è¶…æ—¶'));
                }
            });
        });
    },

    // è°ƒç”¨åç«¯é¢„æµ‹API
    async predict(stockData) {
        try {
            const response = await this.request({
                method: 'POST',
                url: 'http://localhost:8000/api/predict',
                data: stockData
            });
            return response;
        } catch (error) {
            console.error('[AI Predictor] é¢„æµ‹å¤±è´¥:', error);
            throw error;
        }
    },

    // è·å–è‚¡ç¥¨å†å²æ•°æ®
    async getHistory(code) {
        try {
            const response = await this.request({
                method: 'GET',
                url: `http://localhost:8000/api/stock/${code}/history`
            });
            return response;
        } catch (error) {
            console.error('[AI Predictor] è·å–å†å²æ•°æ®å¤±è´¥:', error);
            throw error;
        }
    }
};
```

### 3.5 æ¨¡å—5ï¼šæœ¬åœ°å­˜å‚¨

#### å­˜å‚¨APIå°è£…

```javascript
// å­˜å‚¨æ¨¡å—
const StorageModule = {
    // ä¿å­˜æ•°æ®
    set(key, value) {
        return new Promise((resolve) => {
            GM_setValue(key, JSON.stringify(value));
            resolve();
        });
    },

    // è·å–æ•°æ®
    get(key, defaultValue = null) {
        return new Promise((resolve) => {
            const value = GM_getValue(key);
            resolve(value ? JSON.parse(value) : defaultValue);
        });
    },

    // åˆ é™¤æ•°æ®
    remove(key) {
        return new Promise((resolve) => {
            GM_deleteValue(key);
            resolve();
        });
    },

    // è‡ªé€‰è‚¡ç®¡ç†
    watchlist: {
        // æ·»åŠ è‡ªé€‰è‚¡
        async add(stock) {
            const list = await StorageModule.get('watchlist', []);
            if (!list.find(item => item.code === stock.code)) {
                list.push({
                    ...stock,
                    addTime: Date.now()
                });
                await StorageModule.set('watchlist', list);
            }
        },

        // åˆ é™¤è‡ªé€‰è‚¡
        async remove(code) {
            const list = await StorageModule.get('watchlist', []);
            const filtered = list.filter(item => item.code !== code);
            await StorageModule.set('watchlist', filtered);
        },

        // è·å–è‡ªé€‰è‚¡åˆ—è¡¨
        async getAll() {
            return await StorageModule.get('watchlist', []);
        }
    }
};
```

### 3.6 æ¨¡å—6ï¼šå·¥å…·å‡½æ•°

```javascript
// å·¥å…·å‡½æ•°æ¨¡å—
const Utils = {
    // æ ¼å¼åŒ–æ•°å­—
    formatNumber(num, decimals = 2) {
        if (num === null || num === undefined) return '-';
        return num.toFixed(decimals);
    },

    // æ ¼å¼åŒ–ç™¾åˆ†æ¯”
    formatPercent(num) {
        if (num === null || num === undefined) return '-';
        const sign = num >= 0 ? '+' : '';
        return `${sign}${num.toFixed(2)}%`;
    },

    // æ ¼å¼åŒ–æ—¶é—´
    formatTime(timestamp) {
        return new Date(timestamp).toLocaleString('zh-CN');
    },

    // é˜²æŠ–
    debounce(func, wait) {
        let timeout;
        return function executedFunction(...args) {
            const later = () => {
                clearTimeout(timeout);
                func(...args);
            };
            clearTimeout(timeout);
            timeout = setTimeout(later, wait);
        };
    },

    // èŠ‚æµ
    throttle(func, limit) {
        let inThrottle;
        return function(...args) {
            if (!inThrottle) {
                func.apply(this, args);
                inThrottle = true;
                setTimeout(() => inThrottle = false, limit);
            }
        };
    }
};
```

---

## 4. æ•°æ®æµè®¾è®¡

### 4.1 æ•°æ®æµå›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç”¨æˆ·è®¿é—®é¡µé¢ â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ é¡µé¢æ£€æµ‹ä¸æ³¨å…¥        â”‚
â”‚ - æ£€æµ‹URL             â”‚
â”‚ - ç›‘å¬DOMå˜åŒ–         â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ•°æ®æå–              â”‚
â”‚ - DOMé€‰æ‹©å™¨           â”‚
â”‚ - APIè°ƒç”¨ï¼ˆå¤‡ç”¨ï¼‰     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚                      â”‚
       â–¼                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç›´æ¥è°ƒç”¨LLM API  â”‚   â”‚ è°ƒç”¨æœ¬åœ°åç«¯     â”‚
â”‚ (çº¯å‰ç«¯æ¨¡å¼)     â”‚   â”‚ (æ··åˆæ¨¡å¼)       â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                      â”‚
       â”‚                      â–¼
       â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚              â”‚ åç«¯æœåŠ¡          â”‚
       â”‚              â”‚ - æ•°æ®å¢å¼º        â”‚
       â”‚              â”‚ - LLMè°ƒç”¨         â”‚
       â”‚              â”‚ - ç»“æœç¼“å­˜        â”‚
       â”‚              â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                      â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ ç»“æœè§£æ         â”‚
        â”‚ - JSONè§£æ       â”‚
        â”‚ - æ•°æ®éªŒè¯       â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ UIæ¸²æŸ“           â”‚
        â”‚ - åˆ›å»ºé¢æ¿       â”‚
        â”‚ - æ˜¾ç¤ºé¢„æµ‹       â”‚
        â”‚ - å±•ç¤ºåŸå›        â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 æ—¶åºå›¾

```mermaid
sequenceDiagram
    participant User as ç”¨æˆ·
    participant Page as ä¸œæ–¹è´¢å¯Œé¡µé¢
    participant Script as æ²¹çŒ´è„šæœ¬
    participant API as åç«¯APIï¼ˆå¯é€‰ï¼‰
    participant LLM as LLMæœåŠ¡

    User->>Page: è®¿é—®è‚¡ç¥¨è¯¦æƒ…é¡µ
    Script->>Script: é¡µé¢æ£€æµ‹
    Script->>Page: æå–è‚¡ç¥¨æ•°æ®
    Page-->>Script: è¿”å›æ•°æ®

    alt çº¯å‰ç«¯æ¨¡å¼
        Script->>LLM: ç›´æ¥è°ƒç”¨API
        LLM-->>Script: è¿”å›é¢„æµ‹ç»“æœ
    else æ··åˆæ¨¡å¼
        Script->>API: POST /api/predict
        API->>API: æ•°æ®å¢å¼º
        API->>LLM: è°ƒç”¨é¢„æµ‹
        LLM-->>API: è¿”å›åˆ†æ
        API-->>Script: è¿”å›ç»“æœ
    end

    Script->>Script: è§£æç»“æœ
    Script->>Page: æ³¨å…¥UIé¢æ¿
    Page-->>User: æ˜¾ç¤ºé¢„æµ‹
```

### 4.3 é”™è¯¯å¤„ç†æµç¨‹

```javascript
// é”™è¯¯å¤„ç†æ¨¡å—
const ErrorHandler = {
    // é”™è¯¯ç±»å‹
    ErrorTypes: {
        EXTRACTION_FAILED: 'æ•°æ®æå–å¤±è´¥',
        API_CALL_FAILED: 'APIè°ƒç”¨å¤±è´¥',
        INVALID_DATA: 'æ•°æ®æ— æ•ˆ',
        NETWORK_ERROR: 'ç½‘ç»œé”™è¯¯',
        TIMEOUT: 'è¯·æ±‚è¶…æ—¶'
    },

    // å¤„ç†é”™è¯¯
    handle(error, context = {}) {
        console.error('[AI Predictor Error]', context, error);

        // ç”¨æˆ·å‹å¥½æç¤º
        const message = this.getUserMessage(error);
        this.showErrorNotification(message);

        // é”™è¯¯ä¸ŠæŠ¥ï¼ˆå¯é€‰ï¼‰
        this.report(error, context);
    },

    // è·å–ç”¨æˆ·å‹å¥½çš„é”™è¯¯ä¿¡æ¯
    getUserMessage(error) {
        const errorMap = {
            [this.ErrorTypes.EXTRACTION_FAILED]: 'æ— æ³•è·å–è‚¡ç¥¨æ•°æ®ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•',
            [this.ErrorTypes.API_CALL_FAILED]: 'é¢„æµ‹æœåŠ¡æš‚æ—¶ä¸å¯ç”¨ï¼Œè¯·ç¨åé‡è¯•',
            [this.ErrorTypes.INVALID_DATA]: 'è‚¡ç¥¨æ•°æ®å¼‚å¸¸',
            [this.ErrorTypes.NETWORK_ERROR]: 'ç½‘ç»œè¿æ¥å¤±è´¥',
            [this.ErrorTypes.TIMEOUT]: 'è¯·æ±‚è¶…æ—¶ï¼Œè¯·ç¨åé‡è¯•'
        };

        return errorMap[error.message] || 'å‘ç”ŸæœªçŸ¥é”™è¯¯';
    },

    // æ˜¾ç¤ºé”™è¯¯é€šçŸ¥
    showErrorNotification(message) {
        const notification = document.createElement('div');
        notification.className = 'ai-error-notification';
        notification.innerHTML = `
            <span class="error-icon">âš ï¸</span>
            <span class="error-message">${message}</span>
        `;

        document.body.appendChild(notification);

        // 3ç§’åè‡ªåŠ¨æ¶ˆå¤±
        setTimeout(() => {
            notification.classList.add('fade-out');
            setTimeout(() => notification.remove(), 300);
        }, 3000);
    },

    // é”™è¯¯ä¸ŠæŠ¥
    report(error, context) {
        // å¯ä»¥å‘é€åˆ°æ—¥å¿—æœåŠ¡
        console.log('[Error Report]', { error, context });
    }
};
```

---

## 5. LLMé›†æˆæ¶æ„

### 5.1 LLMè°ƒç”¨ç­–ç•¥

#### ç­–ç•¥1ï¼šç›´æ¥è°ƒç”¨ï¼ˆçº¯å‰ç«¯ï¼‰

```javascript
// ç›´æ¥è°ƒç”¨DeepSeek API
async function callDeepSeekDirectly(stockData) {
    const prompt = `
    ä½ æ˜¯ä¸“ä¸šçš„è‚¡ç¥¨åˆ†æå¸ˆã€‚è¯·åˆ†æä»¥ä¸‹è‚¡ç¥¨ï¼š

    è‚¡ç¥¨ä»£ç ï¼š${stockData.code}
    è‚¡ç¥¨åç§°ï¼š${stockData.name}
    å½“å‰ä»·æ ¼ï¼š${stockData.currentPrice}å…ƒ
    æ¶¨è·Œå¹…ï¼š${stockData.changePercent}%

    è¯·ä»ä»¥ä¸‹ç»´åº¦åˆ†æï¼š
    1. æŠ€æœ¯é¢ï¼šæŠ€æœ¯æŒ‡æ ‡åˆ†æ
    2. åŸºæœ¬é¢ï¼šè¡Œä¸šå’Œå…¬å¸åˆ†æ
    3. æƒ…ç»ªé¢ï¼šå¸‚åœºæƒ…ç»ªåˆ†æ

    è¯·ä»¥JSONæ ¼å¼è¿”å›ï¼š
    {
        "predictPrice": é¢„æµ‹ä»·æ ¼,
        "changePercent": é¢„æµ‹æ¶¨è·Œå¹…,
        "trend": "UP"|"DOWN"|"NEUTRAL",
        "suggestion": "BUY"|"HOLD"|"SELL",
        "confidence": ç½®ä¿¡åº¦0-100,
        "reason": {
            "technical": "æŠ€æœ¯é¢åŸå› ",
            "fundamental": "åŸºæœ¬é¢åŸå› ",
            "sentiment": "æƒ…ç»ªé¢åŸå› "
        }
    }
    `;

    try {
        const response = await APIModule.request({
            method: 'POST',
            url: 'https://api.deepseek.com/v1/chat/completions',
            headers: {
                'Authorization': `Bearer ${DEEPSEEK_API_KEY}`
            },
            data: {
                model: 'deepseek-chat',
                messages: [
                    { role: 'system', content: 'ä½ æ˜¯ä¸“ä¸šçš„è‚¡ç¥¨åˆ†æå¸ˆã€‚' },
                    { role: 'user', content: prompt }
                ],
                temperature: 0.7,
                max_tokens: 1000
            }
        });

        const content = response.choices[0].message.content;
        return JSON.parse(content);
    } catch (error) {
        ErrorHandler.handle(error, { context: 'LLMç›´æ¥è°ƒç”¨' });
        throw error;
    }
}
```

#### ç­–ç•¥2ï¼šé€šè¿‡åç«¯è°ƒç”¨ï¼ˆæ¨èï¼‰

```javascript
// é€šè¿‡åç«¯è°ƒç”¨LLM
async function callDeepSeekViaBackend(stockData) {
    try {
        const response = await APIModule.request({
            method: 'POST',
            url: 'http://localhost:8000/api/predict',
            data: stockData
        });
        return response;
    } catch (error) {
        ErrorHandler.handle(error, { context: 'åç«¯LLMè°ƒç”¨' });
        throw error;
    }
}
```

### 5.2 Promptå·¥ç¨‹

#### System Prompt

```javascript
const SYSTEM_PROMPT = `
ä½ æ˜¯ä¸€ä½ä¸“ä¸šçš„è‚¡ç¥¨åˆ†æå¸ˆï¼Œæ‹¥æœ‰10å¹´ä»¥ä¸Šçš„Aè‚¡å¸‚åœºåˆ†æç»éªŒã€‚

ä½ çš„ä»»åŠ¡æ˜¯ï¼š
1. åˆ†æè‚¡ç¥¨çš„æŠ€æœ¯é¢ã€åŸºæœ¬é¢ã€æƒ…ç»ªé¢
2. é¢„æµ‹æœªæ¥1-3å¤©çš„ä»·æ ¼èµ°åŠ¿
3. ç»™å‡ºæ˜ç¡®çš„æŠ•èµ„å»ºè®®ï¼ˆä¹°å…¥/æŒæœ‰/å–å‡ºï¼‰
4. è§£é‡Šé¢„æµ‹çš„åŸå› å’Œä¾æ®

åˆ†æåŸåˆ™ï¼š
- å®¢è§‚ç†æ€§ï¼ŒåŸºäºæ•°æ®å’Œäº‹å®
- æ˜ç¡®ä¸ç¡®å®šæ€§ï¼Œä¸å¤¸å¤§é¢„æµ‹å‡†ç¡®æ€§
- é£é™©æç¤ºï¼Œå¼ºè°ƒæŠ•èµ„æœ‰é£é™©
- å¤šç»´åº¦åˆ†æï¼Œç»¼åˆè€ƒè™‘å„ç§å› ç´ 

è¾“å‡ºè¦æ±‚ï¼š
- ä»¥JSONæ ¼å¼è¿”å›ç»“æœ
- åŸå› åˆ†æç®€æ´æ˜äº†ï¼Œæ¯æ¡ä¸è¶…è¿‡50å­—
- é¢„æµ‹ä»·æ ¼åŸºäºå½“å‰ä»·æ ¼åˆç†æ³¢åŠ¨èŒƒå›´å†…
`;
```

#### User Promptæ¨¡æ¿

```javascript
function generateUserPrompt(stockData, historyData) {
    return `
è¯·åˆ†æä»¥ä¸‹è‚¡ç¥¨ï¼š

## åŸºæœ¬ä¿¡æ¯
- è‚¡ç¥¨ä»£ç ï¼š${stockData.code}
- è‚¡ç¥¨åç§°ï¼š${stockData.name}
- æ‰€å±å¸‚åœºï¼š${stockData.market === 'SZ' ? 'æ·±åœ³' : 'ä¸Šæµ·'}

## å®æ—¶è¡Œæƒ…
- å½“å‰ä»·æ ¼ï¼š${stockData.currentPrice}å…ƒ
- ä»Šå¼€ï¼š${stockData.openPrice}å…ƒ
- æ˜¨æ”¶ï¼š${stockData.closePrice}å…ƒ
- æœ€é«˜ï¼š${stockData.highPrice}å…ƒ
- æœ€ä½ï¼š${stockData.lowPrice}å…ƒ
- æ¶¨è·Œå¹…ï¼š${stockData.changePercent}%
- æˆäº¤é‡ï¼š${(stockData.volume / 10000).toFixed(2)}ä¸‡æ‰‹
- æˆäº¤é¢ï¼š${(stockData.amount / 100000000).toFixed(2)}äº¿å…ƒ

## å†å²æ•°æ®ï¼ˆæœ€è¿‘5å¤©ï¼‰
${historyData.map((day, i) => `
ç¬¬${i + 1}å¤©ï¼š${day.close}å…ƒï¼Œæ¶¨è·Œ${day.changePercent}%
`).join('')}

## æŠ€æœ¯æŒ‡æ ‡
- 5æ—¥å‡çº¿ï¼š${stockData.indicators?.MA5 || 'æš‚æ— '}
- 10æ—¥å‡çº¿ï¼š${stockData.indicators?.MA10 || 'æš‚æ— '}
- 20æ—¥å‡çº¿ï¼š${stockData.indicators?.MA20 || 'æš‚æ— '}
- MACDï¼š${stockData.indicators?.MACD || 'æš‚æ— '}
- RSIï¼š${stockData.indicators?.RSI || 'æš‚æ— '}

è¯·ä»¥JSONæ ¼å¼è¿”å›åˆ†æç»“æœã€‚
`;
}
```

### 5.3 å“åº”è§£æ

```javascript
// LLMå“åº”è§£æ
function parseLLMResponse(llmResponse) {
    try {
        // å°è¯•ç›´æ¥è§£æJSON
        let result = llmResponse;

        // å¦‚æœæ˜¯å­—ç¬¦ä¸²ï¼Œå°è¯•æå–JSON
        if (typeof result === 'string') {
            // æå–JSONéƒ¨åˆ†
            const jsonMatch = result.match(/\{[\s\S]*\}/);
            if (jsonMatch) {
                result = JSON.parse(jsonMatch[0]);
            } else {
                throw new Error('æ— æ³•æå–JSON');
            }
        }

        // éªŒè¯å¿…éœ€å­—æ®µ
        const requiredFields = [
            'predictPrice',
            'changePercent',
            'trend',
            'suggestion',
            'confidence',
            'reason'
        ];

        const missingFields = requiredFields.filter(field => !(field in result));
        if (missingFields.length > 0) {
            throw new Error(`ç¼ºå°‘å¿…éœ€å­—æ®µï¼š${missingFields.join(', ')}`);
        }

        // æ•°æ®ç±»å‹è½¬æ¢
        result.predictPrice = parseFloat(result.predictPrice);
        result.changePercent = parseFloat(result.changePercent);
        result.confidence = parseInt(result.confidence);

        // è¶‹åŠ¿å½’ä¸€åŒ–
        result.trend = result.trend.toUpperCase();
        if (!['UP', 'DOWN', 'NEUTRAL'].includes(result.trend)) {
            result.trend = 'NEUTRAL';
        }

        // å»ºè®®å½’ä¸€åŒ–
        result.suggestion = result.suggestion.toUpperCase();
        if (!['BUY', 'HOLD', 'SELL'].includes(result.suggestion)) {
            result.suggestion = 'HOLD';
        }

        // è®¡ç®—é¢„æµ‹åŒºé—´
        const volatility = Math.abs(result.changePercent) * 0.5;
        result.lowerBound = result.predictPrice * (1 - volatility / 100);
        result.upperBound = result.predictPrice * (1 + volatility / 100);

        return result;
    } catch (error) {
        console.error('[LLM Parser] è§£æå¤±è´¥:', error);
        throw new Error('LLMå“åº”è§£æå¤±è´¥');
    }
}
```

---

## 6. UI/UXè®¾è®¡

### 6.1 è®¾è®¡åŸåˆ™

1. **ç®€æ´ä¼˜å…ˆ**ï¼šä¿¡æ¯å¯†åº¦é€‚ä¸­ï¼Œä¸æ‹¥æŒ¤
2. **è§†è§‰å±‚æ¬¡**ï¼šé‡è¦ä¿¡æ¯çªå‡ºæ˜¾ç¤º
3. **äº¤äº’åé¦ˆ**ï¼šæ“ä½œæœ‰æ˜ç¡®åé¦ˆ
4. **å“åº”å¼**ï¼šé€‚é…ä¸åŒå±å¹•

### 6.2 é¢œè‰²æ–¹æ¡ˆ

```css
/* ä¸»è‰²è°ƒ */
--primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);

/* è¯­ä¹‰è‰² */
--color-up: #dc3545;      /* ä¸Šæ¶¨ï¼ˆçº¢ï¼‰ */
--color-down: #28a745;    /* ä¸‹è·Œï¼ˆç»¿ï¼‰ */
--color-neutral: #6c757d; /* ä¸­æ€§ */

/* åŠŸèƒ½è‰² */
--color-buy: #28a745;     /* ä¹°å…¥ */
--color-hold: #ffc107;    /* æŒæœ‰ */
--color-sell: #dc3545;    /* å–å‡º */

/* èƒŒæ™¯è‰² */
--bg-primary: #ffffff;
--bg-secondary: #f8f9fa;
--bg-tertiary: #e9ecef;
```

### 6.3 äº¤äº’è®¾è®¡

#### åŠ è½½çŠ¶æ€

```javascript
function showLoading(panel) {
    const loading = document.createElement('div');
    loading.className = 'loading-container';
    loading.innerHTML = `
        <div class="loading-spinner"></div>
        <div class="loading-text">AIæ­£åœ¨åˆ†æä¸­...</div>
    `;
    panel.querySelector('.panel-content').innerHTML = '';
    panel.querySelector('.panel-content').appendChild(loading);
}

function hideLoading(panel) {
    const loading = panel.querySelector('.loading-container');
    if (loading) {
        loading.remove();
    }
}
```

#### é”™è¯¯çŠ¶æ€

```javascript
function showError(panel, message) {
    const errorDiv = document.createElement('div');
    errorDiv.className = 'error-container';
    errorDiv.innerHTML = `
        <div class="error-icon">âŒ</div>
        <div class="error-message">${message}</div>
        <button class="error-retry">é‡è¯•</button>
    `;

    panel.querySelector('.panel-content').innerHTML = '';
    panel.querySelector('.panel-content').appendChild(errorDiv);

    // ç»‘å®šé‡è¯•äº‹ä»¶
    errorDiv.querySelector('.error-retry').addEventListener('click', () => {
        window.dispatchEvent(new CustomEvent('ai-predictor-refresh'));
    });
}
```

#### æˆåŠŸçŠ¶æ€

```javascript
function showSuccess(panel, data) {
    hideLoading(panel);

    const content = panel.querySelector('.panel-content');
    content.innerHTML = `
        ${UIModule.renderPriceCard(data)}
        ${UIModule.renderReasonAnalysis(data)}
        ${UIModule.renderSuggestion(data)}
    `;

    // æ·»åŠ æˆåŠŸåŠ¨ç”»
    content.classList.add('success-animation');
    setTimeout(() => {
        content.classList.remove('success-animation');
    }, 500);
}
```

### 6.4 å“åº”å¼è®¾è®¡

```css
/* ç§»åŠ¨ç«¯é€‚é… */
@media (max-width: 768px) {
    .ai-prediction-panel {
        width: calc(100vw - 40px) !important;
        right: 20px !important;
        left: 20px !important;
    }

    .price-card,
    .reason-analysis,
    .suggestion-card {
        padding: 10px !important;
    }
}

/* å°å±å¹•é€‚é… */
@media (max-width: 480px) {
    .ai-prediction-panel {
        top: 60px !important;
        width: calc(100vw - 20px) !important;
        right: 10px !important;
        left: 10px !important;
    }

    .panel-title .text {
        font-size: 14px !important;
    }
}
```

---

## 7. æŠ€æœ¯æ¶æ„

### 7.1 ä»£ç ç»„ç»‡

```javascript
// ä¸»æ–‡ä»¶ç»“æ„ï¼ˆstock-ai-predictor.user.jsï¼‰
// ==UserScript==
// @name         ä¸œæ–¹è´¢å¯ŒAIé¢„æµ‹åŠ©æ‰‹
// ...
// ==/UserScript==

(function() {
    'use strict';

    // ==================== å¸¸é‡é…ç½® ====================
    const CONFIG = {
        API_BASE_URL: 'http://localhost:8000',
        DEFAULT_TIMEOUT: 10000,
        CACHE_DURATION: 5 * 60 * 1000, // 5åˆ†é’Ÿ
        VERSION: '1.0.0'
    };

    // ==================== å·¥å…·æ¨¡å— ====================
    const Utils = { /* ... */ };

    // ==================== é”™è¯¯å¤„ç† ====================
    const ErrorHandler = { /* ... */ };

    // ==================== å­˜å‚¨æ¨¡å— ====================
    const StorageModule = { /* ... */ };

    // ==================== APIæ¨¡å— ====================
    const APIModule = { /* ... */ };

    // ==================== UIæ¨¡å— ====================
    const UIModule = { /* ... */ };

    // ==================== ä¸šåŠ¡é€»è¾‘ ====================
    const App = {
        // ä¸»å…¥å£
        async main() {
            // 1. é¡µé¢æ£€æµ‹
            // 2. æ•°æ®æå–
            // 3. AIé¢„æµ‹
            // 4. UIå±•ç¤º
        }
    };

    // ==================== å¯åŠ¨ ====================
    App.main();
})();
```

### 7.2 æ¨¡å—é€šä¿¡

```javascript
// äº‹ä»¶æ€»çº¿
const EventBus = {
    events: {},

    on(event, callback) {
        if (!this.events[event]) {
            this.events[event] = [];
        }
        this.events[event].push(callback);
    },

    emit(event, data) {
        if (this.events[event]) {
            this.events[event].forEach(callback => callback(data));
        }
    }
};

// ä½¿ç”¨ç¤ºä¾‹
EventBus.on('stockDataUpdated', (data) => {
    console.log('è‚¡ç¥¨æ•°æ®å·²æ›´æ–°:', data);
});

EventBus.emit('stockDataUpdated', stockData);
```

### 7.3 æ€§èƒ½ä¼˜åŒ–

```javascript
// ç¼“å­˜ç®¡ç†
const CacheManager = {
    cache: new Map(),

    set(key, value, duration = CONFIG.CACHE_DURATION) {
        this.cache.set(key, {
            value,
            expiry: Date.now() + duration
        });
    },

    get(key) {
        const item = this.cache.get(key);
        if (!item) return null;

        if (Date.now() > item.expiry) {
            this.cache.delete(key);
            return null;
        }

        return item.value;
    },

    clear() {
        this.cache.clear();
    }
};

// é˜²æŠ–è¯·æ±‚
const debouncedPredict = Utils.debounce(async (stockData) => {
    const cacheKey = `predict_${stockData.code}_${stockData.timestamp}`;

    let result = CacheManager.get(cacheKey);
    if (!result) {
        result = await APIModule.predict(stockData);
        CacheManager.set(cacheKey, result);
    }

    return result;
}, 1000);
```

---

## 8. éƒ¨ç½²æ¶æ„

### 8.1 éƒ¨ç½²æ¨¡å¼å¯¹æ¯”

| éƒ¨ç½²æ¨¡å¼ | å¤æ‚åº¦ | é€‚ç”¨åœºæ™¯ |
|---------|--------|---------|
| **å•æ–‡ä»¶éƒ¨ç½²** | â­ | ä¸ªäººä½¿ç”¨ã€å¿«é€Ÿåˆ†äº« |
| **åç«¯+å‰ç«¯** | â­â­â­ | ç”Ÿäº§ç¯å¢ƒã€åŠŸèƒ½å®Œæ•´ |
| **äº‘ç«¯éƒ¨ç½²** | â­â­â­â­ | å¤šç”¨æˆ·ã€å•†ä¸šäº§å“ |

### 8.2 å•æ–‡ä»¶éƒ¨ç½²ï¼ˆæ¨èMVPï¼‰

#### æ­¥éª¤

1. **æ‰“åŒ…è„šæœ¬**
   - å°†æ‰€æœ‰ä»£ç åˆå¹¶åˆ°ä¸€ä¸ªæ–‡ä»¶
   - ç§»é™¤console.log
   - å‹ç¼©ä»£ç ï¼ˆå¯é€‰ï¼‰

2. **å‘å¸ƒæ–¹å¼**
   - GitHub Releases
   - GreasyFork
   - ç›´æ¥åˆ†äº«æ–‡ä»¶

3. **ç”¨æˆ·å®‰è£…**
   ```
   1. å®‰è£…Tampermonkeyæ’ä»¶
   2. ç‚¹å‡»è„šæœ¬æ–‡ä»¶æˆ–é“¾æ¥
   3. ç¡®è®¤å®‰è£…
   4. è®¿é—®ä¸œæ–¹è´¢å¯Œé¡µé¢
   5. è‡ªåŠ¨æ˜¾ç¤ºé¢„æµ‹é¢æ¿
   ```

### 8.3 åç«¯éƒ¨ç½²ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰

#### ç›®å½•ç»“æ„

```
stock-predictor-backend/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ main.py              # FastAPIå…¥å£
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â””â”€â”€ routes.py        # APIè·¯ç”±
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ llm_service.py   # LLMæœåŠ¡
â”‚   â”‚   â””â”€â”€ data_service.py  # æ•°æ®æœåŠ¡
â”‚   â””â”€â”€ models/
â”‚       â””â”€â”€ schemas.py       # æ•°æ®æ¨¡å‹
â”œâ”€â”€ requirements.txt         # ä¾èµ–
â”œâ”€â”€ .env                     # é…ç½®
â””â”€â”€ README.md               # è¯´æ˜
```

#### å¯åŠ¨è„šæœ¬

```bash
#!/bin/bash
# start.sh

echo "å¯åŠ¨è‚¡ç¥¨AIé¢„æµ‹æœåŠ¡..."

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
source venv/bin/activate

# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# å¯åŠ¨æœåŠ¡
uvicorn app.main:app --host 0.0.0.0 --port 8000 --reload
```

---

## 9. å®‰å…¨æ¶æ„

### 9.1 å®‰å…¨è€ƒè™‘

#### å‰ç«¯å®‰å…¨

```javascript
// XSSé˜²æŠ¤
function sanitizeHTML(str) {
    const div = document.createElement('div');
    div.textContent = str;
    return div.innerHTML;
}

// ä½¿ç”¨ç¤ºä¾‹
const safeHTML = sanitizeHTML(userInput);
element.innerHTML = safeHTML;
```

#### APIå®‰å…¨

```javascript
// API Keyç®¡ç†ï¼ˆä¸è¦ç¡¬ç¼–ç ï¼‰
const API_KEYS = {
    deepseek: localStorage.getItem('DEEPSEEK_API_KEY') || '',
    openai: localStorage.getItem('OPENAI_API_KEY') || ''
};

// è®¾ç½®ç•Œé¢æä¾›API Keyè¾“å…¥
function showSettings() {
    const key = prompt('è¯·è¾“å…¥DeepSeek API Key:');
    if (key) {
        localStorage.setItem('DEEPSEEK_API_KEY', key);
    }
}
```

#### æ•°æ®éªŒè¯

```javascript
// è¾“å…¥éªŒè¯
function validateStockCode(code) {
    // Aè‚¡ä»£ç æ ¼å¼ï¼š6ä½æ•°å­—
    return /^\d{6}$/.test(code);
}

function validatePrice(price) {
    // ä»·æ ¼å¿…é¡»ä¸ºæ­£æ•°
    return !isNaN(price) && price > 0;
}

// ä½¿ç”¨
if (!validateStockCode(stockData.code)) {
    throw new Error('æ— æ•ˆçš„è‚¡ç¥¨ä»£ç ');
}
```

### 9.2 éšç§ä¿æŠ¤

```javascript
// ä¸æ”¶é›†ç”¨æˆ·æ•°æ®
// æ‰€æœ‰æ•°æ®å­˜å‚¨åœ¨æœ¬åœ°
// å¯é€‰çš„åŒ¿åç»Ÿè®¡ï¼ˆéœ€ç”¨æˆ·åŒæ„ï¼‰
```

### 9.3 å…è´£å£°æ˜

```javascript
const DISCLAIMER = `
âš ï¸ é‡è¦æç¤ºï¼š

1. æœ¬å·¥å…·æä¾›çš„é¢„æµ‹ä»…ä¾›å‚è€ƒï¼Œä¸æ„æˆä»»ä½•æŠ•èµ„å»ºè®®
2. è‚¡å¸‚æœ‰é£é™©ï¼ŒæŠ•èµ„éœ€è°¨æ…
3. AIé¢„æµ‹å¹¶é100%å‡†ç¡®ï¼Œè¯·ç†æ€§å¯¹å¾…
4. ä»»ä½•æŠ•èµ„å†³ç­–è¯·åŸºäºè‡ªå·±çš„åˆ¤æ–­
5. ä½¿ç”¨æœ¬å·¥å…·å³è¡¨ç¤ºæ‚¨åŒæ„è‡ªè¡Œæ‰¿æ‹…æŠ•èµ„é£é™©

å¼€å‘å›¢é˜Ÿä¸å¯¹ä»»ä½•æŠ•èµ„æŸå¤±è´Ÿè´£ã€‚
`;
```

---

## 10. æ‰©å±•æ¶æ„

### 10.1 å¯æ‰©å±•ç‚¹

#### 1. æ•°æ®æºæ‰©å±•

```javascript
// æ•°æ®æºæŠ½è±¡
const DataSource = {
    sources: {
        eastmoney: { /* ... */ },
        akshare: { /* ... */ },
        tushare: { /* ... */ }
    },

    async getData(code, source = 'eastmoney') {
        return await this.sources[source].get(code);
    }
};
```

#### 2. LLMæ‰©å±•

```javascript
// LLMæŠ½è±¡
const LLMProvider = {
    providers: {
        deepseek: { /* ... */ },
        openai: { /* ... */ },
        wenxin: { /* ... */ }
    },

    async predict(data, provider = 'deepseek') {
        return await this.providers[provider].predict(data);
    }
};
```

#### 3. UIä¸»é¢˜æ‰©å±•

```javascript
// ä¸»é¢˜ç³»ç»Ÿ
const ThemeManager = {
    themes: {
        default: { /* ... */ },
        dark: { /* ... */ },
        light: { /* ... */ }
    },

    setTheme(themeName) {
        const theme = this.themes[themeName];
        // åº”ç”¨ä¸»é¢˜
    }
};
```

### 10.2 æ’ä»¶åŒ–æ¶æ„

```javascript
// æ’ä»¶ç³»ç»Ÿ
const PluginSystem = {
    plugins: [],

    register(plugin) {
        this.plugins.push(plugin);
        plugin.init();
    },

    unregister(pluginName) {
        const index = this.plugins.findIndex(p => p.name === pluginName);
        if (index > -1) {
            this.plugins[index].destroy();
            this.plugins.splice(index, 1);
        }
    }
};

// æ’ä»¶ç¤ºä¾‹
const NewsPlugin = {
    name: 'news',
    init() {
        console.log('æ–°é—»æ’ä»¶å·²åŠ è½½');
    },
    destroy() {
        console.log('æ–°é—»æ’ä»¶å·²å¸è½½');
    }
};

PluginSystem.register(NewsPlugin);
```

### 10.3 åæœŸæ‰©å±•è·¯çº¿å›¾

**çŸ­æœŸï¼ˆ1-2ä¸ªæœˆï¼‰**ï¼š
- [ ] å¢åŠ æ›´å¤šæ•°æ®æº
- [ ] ä¼˜åŒ–Promptå·¥ç¨‹
- [ ] å¢åŠ å†å²å‡†ç¡®ç‡ç»Ÿè®¡
- [ ] æ”¯æŒè‡ªå®šä¹‰ä¸»é¢˜

**ä¸­æœŸï¼ˆ3-6ä¸ªæœˆï¼‰**ï¼š
- [ ] å¢åŠ æ–°é—»æƒ…æ„Ÿåˆ†æ
- [ ] å¢åŠ æ¿å—åˆ†æ
- [ ] æ”¯æŒè‡ªé€‰è‚¡æ‰¹é‡åˆ†æ
- [ ] å¼€å‘ç§»åŠ¨ç«¯ç‰ˆæœ¬

**é•¿æœŸï¼ˆ6-12ä¸ªæœˆï¼‰**ï¼š
- [ ] å‡çº§ä¸ºChromeæ’ä»¶
- [ ] å¼€å‘ç‹¬ç«‹Webåº”ç”¨
- [ ] æ”¯æŒå¤šå¸‚åœºï¼ˆæ¸¯è‚¡ã€ç¾è‚¡ï¼‰
- [ ] å¢åŠ è‡ªåŠ¨äº¤æ˜“æ¥å£

---

## 11. æ€»ç»“

### 11.1 æ¶æ„ä¼˜åŠ¿

1. **æç®€è®¾è®¡**ï¼šå•æ–‡ä»¶è„šæœ¬ï¼Œæ— ä¾èµ–
2. **å¿«é€Ÿè¿­ä»£**ï¼šä¿®æ”¹å³ç”Ÿæ•ˆï¼Œæ— éœ€é‡æ–°å®‰è£…
3. **æ˜“äºåˆ†äº«**ï¼šä¸€ä¸ªæ–‡ä»¶å³å¯åˆ†å‘
4. **AIé©±åŠ¨**ï¼š90%ä»£ç ç”±AIç”Ÿæˆ
5. **æˆæœ¬ä½å»‰**ï¼šå®Œå…¨å…è´¹ï¼Œå¯é€‰LLM API

### 11.2 æŠ€æœ¯äº®ç‚¹

1. **æ¨¡å—åŒ–è®¾è®¡**ï¼šä»£ç æ¸…æ™°ï¼Œæ˜“äºç»´æŠ¤
2. **å®¹é”™æœºåˆ¶**ï¼šå¤šå±‚å¤‡ä»½ï¼Œç¨³å®šå¯é 
3. **æ€§èƒ½ä¼˜åŒ–**ï¼šç¼“å­˜ã€é˜²æŠ–ã€èŠ‚æµ
4. **UI/UXä¼˜ç§€**ï¼šç°ä»£åŒ–è®¾è®¡ï¼Œç”¨æˆ·ä½“éªŒå¥½
5. **å®‰å…¨å¯é **ï¼šè¾“å…¥éªŒè¯ã€XSSé˜²æŠ¤

### 11.3 å¼€å‘æ—¶é—´çº¿ï¼ˆAIè¾…åŠ©ï¼‰

| é˜¶æ®µ | æ—¶é—´ | AIè´¡çŒ®åº¦ |
|-----|------|---------|
| Day 1 | 4å°æ—¶ | åŸºç¡€è„šæœ¬ï¼ˆ90%ï¼‰ |
| Day 2 | 3å°æ—¶ | åç«¯é›†æˆï¼ˆ85%ï¼‰ |
| Day 3 | 3å°æ—¶ | UIä¼˜åŒ–ï¼ˆ80%ï¼‰ |
| Day 4-5 | 4å°æ—¶ | æµ‹è¯•å‘å¸ƒï¼ˆ60%ï¼‰ |
| **æ€»è®¡** | **14å°æ—¶** | **83%** |

### 11.4 åç»­æ­¥éª¤

1. âœ… ç¡®è®¤æ¶æ„è®¾è®¡
2. âœ… å¼€å§‹AIè¾…åŠ©å¼€å‘
3. âœ… æµ‹è¯•ä¸ä¼˜åŒ–
4. âœ… å‘å¸ƒä¸åˆ†äº«

---

**æ–‡æ¡£ç»“æŸ**

**ç›¸å…³æ–‡æ¡£**ï¼š
- [åˆå§‹éœ€æ±‚.md](./åˆå§‹éœ€æ±‚.md)
- [éœ€æ±‚åˆ†æä¸åŠŸèƒ½ç‚¹.md](./éœ€æ±‚åˆ†æä¸åŠŸèƒ½ç‚¹.md)
- [æŠ€æœ¯æ–¹æ¡ˆå¯¹æ¯”åˆ†æ_v2.0.md](./æŠ€æœ¯æ–¹æ¡ˆå¯¹æ¯”åˆ†æ_v2.0.md)

**ä¸‹ä¸€æ­¥**ï¼šå¼€å§‹å®æ–½å¼€å‘ï¼Œè¯¦è§ [æ²¹çŒ´è„šæœ¬å¼€å‘æŒ‡å—](./å¼€å‘æŒ‡å—_æ²¹çŒ´è„šæœ¬_v1.0.md)ï¼ˆå¾…åˆ›å»ºï¼‰
